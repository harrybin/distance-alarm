<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:DistanceAlarm.ViewModels"
             x:Class="DistanceAlarm.Views.SettingsPage"
             x:DataType="viewmodels:SettingsViewModel"
             Title="Settings">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="30">

            <!-- Ping Settings -->
            <Frame BackgroundColor="{AppThemeBinding Light=LightGray, Dark=DarkGray}" Padding="20">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Connection Settings" 
                           FontSize="18" 
                           FontAttributes="Bold" />
                    
                    <StackLayout Orientation="Horizontal" Spacing="10">
                        <Label Text="Ping Interval (seconds):" 
                               VerticalOptions="Center" 
                               FontSize="16" />
                        <Stepper Value="{Binding Settings.PingInterval}" 
                                 Minimum="1" 
                                 Maximum="60" 
                                 Increment="1" />
                        <Label Text="{Binding Settings.PingInterval}" 
                               VerticalOptions="Center" 
                               FontSize="16" 
                               FontAttributes="Bold" />
                    </StackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Alarm Settings -->
            <Frame BackgroundColor="{AppThemeBinding Light=LightGray, Dark=DarkGray}" Padding="20">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Alarm Settings" 
                           FontSize="18" 
                           FontAttributes="Bold" />
                    
                    <!-- Vibration Settings -->
                    <StackLayout Orientation="Horizontal" Spacing="10">
                        <Switch IsToggled="{Binding Settings.VibrationEnabled}" />
                        <Label Text="Enable Vibration" 
                               VerticalOptions="Center" 
                               FontSize="16" />
                    </StackLayout>
                    
                    <StackLayout Orientation="Horizontal" 
                                 Spacing="10" 
                                 IsEnabled="{Binding Settings.VibrationEnabled}">
                        <Label Text="Vibration Duration (ms):" 
                               VerticalOptions="Center" 
                               FontSize="14" />
                        <Stepper Value="{Binding Settings.VibrationDuration}" 
                                 Minimum="100" 
                                 Maximum="5000" 
                                 Increment="100" />
                        <Label Text="{Binding Settings.VibrationDuration}" 
                               VerticalOptions="Center" 
                               FontSize="14" 
                               FontAttributes="Bold" />
                    </StackLayout>

                    <!-- Sound Settings -->
                    <StackLayout Orientation="Horizontal" Spacing="10">
                        <Switch IsToggled="{Binding Settings.SoundEnabled}" />
                        <Label Text="Enable Sound" 
                               VerticalOptions="Center" 
                               FontSize="16" />
                    </StackLayout>
                    
                    <StackLayout Orientation="Horizontal" 
                                 Spacing="10" 
                                 IsEnabled="{Binding Settings.SoundEnabled}">
                        <Label Text="Sound Volume:" 
                               VerticalOptions="Center" 
                               FontSize="14" />
                        <Slider Value="{Binding Settings.SoundVolume}" 
                                Minimum="0" 
                                Maximum="1" 
                                ThumbColor="DodgerBlue" />
                        <Label Text="{Binding Settings.SoundVolume, StringFormat='{0:P0}'}" 
                               VerticalOptions="Center" 
                               FontSize="14" 
                               FontAttributes="Bold" />
                    </StackLayout>

                    <!-- Notification Settings -->
                    <StackLayout Orientation="Horizontal" Spacing="10">
                        <Switch IsToggled="{Binding Settings.NotificationEnabled}" />
                        <Label Text="Enable Notifications" 
                               VerticalOptions="Center" 
                               FontSize="16" />
                    </StackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Action Buttons -->
            <VerticalStackLayout Spacing="15">
                <Button Text="Save Settings" 
                        Command="{Binding SaveSettingsCommand}"
                        BackgroundColor="Green" />
                
                <Button Text="Reset to Defaults" 
                        Command="{Binding ResetToDefaultsCommand}"
                        BackgroundColor="Orange" />
            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>